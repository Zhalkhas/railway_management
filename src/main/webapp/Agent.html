<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
        <link rel="stylesheet" type="text/css" href="railway.css">
    <title>Agent_page</title>
    <script src="https://code.jquery.com/jquery-3.1.1.min.js"></script>

</head>
<body>

<div class="agent_search_button" >
    <a href="index.html" id="main_button"  >Go To Search</a> <br>
</div>

<table class="table" id agent_table>
    <thead>
    <tr class="table-head" id="agent_table_head">
        <!--    ticketId, ownerN, ownerS, price, documentID, passengerID, departureTime, departureName, arrivalTime, arrivalName-->
        <th class="column1">ticket_ID</th>
        <th class="column2">ownerN</th>
        <th class="column3">ownerS</th>
        <th class="column4">price</th>
        <th class="column5">passengerID</th>
        <th class="column6">departureTime</th>
        <th class="column7">departureName</th>
        <th class="column8">arrivalTime</th>
        <th class="column9">arrivalName</th>
        <th></th>
        <th></th>
        <th></th>
    </tr>
    </thead>
    <tbody class="table-body" id="agent_table_body">

    </tbody>
</table>

<script>
    function updateList(items) {
        console.log(items);
        $("#agent_table_body tbody tr").remove();
        $("#agent_table_body").html("");
        items = JSON.parse(items);
        console.log(items);
        items.forEach(function (index) {
            var ticketId = index.ticketId;
            var ownerN = index.ownerN;
            var ownerS = index.ownerS;
            var price = index.price;
            var passengerID = index.passengerID;
            var departureTime = index.departureTime;
            var departureName = index.departureName;
            var arrivalTime = index.arrivalTime;
            var arrivalName = index.arrivalName;

            $("#agent_table_body").append(
                "<tr>" +
                "<td class='column1'>" + ticketId + "</td>" +
                "<td class='column2'>" + ownerN + "</td>" +
                "<td class='column3'>" + ownerS + "</td>" +
                "<td class='column4'>" + price + "</td>" +
                "<td class='column5'>" + passengerID + "</td>" +
                "<td class='column6'>" + departureTime + "</td>" +
                "<td class='column7'>" + departureName + "</td>" +
                "<td class='column8'>" + arrivalTime + "</td>" +
                "<td class='column9'>" + arrivalName + "</td>" +
                "<td><button type='button' class='agent_button' onclick='agent_create(+index+)'>create</button></td>" +
                "<td><button type='button' class='agent_button' onclick='agent_edit(+index+)'>edit</button></td>" +
                "<td><button type='button' class='agent_button' onclick='agent_delete(+index+)'>delete</button></td>" +
                "</tr>");
        });
    }

    $(document).ready(function () {
        $.get("api/ticket/all", function (r) {
            updateList(r)
        })
    });


</script>
</body>
</html>
