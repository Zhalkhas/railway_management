<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">

    <title>Profile Page</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.4.1.min.js"> </script>
</head>
<body>
<h1>Past Trips</h1>
<div class="pastTrips">
    <div class="container-table100">
        <div class="wrap-table100">
            <div class="table100">
                <table>
                    <thead>
                    <tr class="table-head">
                        <th class="column1">Ticket ID</th>
                        <th class="column2">Departure Time</th>
                        <th class="column3">Arrival Time</th>
                        <th class="column4">Departure Station Name</th>
                        <th class="column5">Arrival Station Name</th>
                        <th class="column6">Train id</th>
                    </tr>
                    </thead>
                    <tbody id="tablePast">

                    </tbody>
                </table>
            </div>
        </div>
    </div>
</div>

<h1>Future Trips</h1>

<div class="futureTrips">
    <div class="container-table100">
        <div class="wrap-table100">
            <div class="table100">
                <table>
                    <thead>
                    <tr class="table-head">
                        <th class="column1">Ticket ID</th>
                        <th class="column2">Departure Time</th>
                        <th class="column3">Arrival Time</th>
                        <th class="column4">Departure Station Name</th>
                        <th class="column5">Arrival Station Name</th>
                        <th class="column6">Train id</th>
                    </tr>
                    </thead>
                    <tbody id="tableFuture">

                    </tbody>
                </table>
            </div>
        </div>
    </div>
</div>


<a href="index.html"><button>Go To Search</button></a>

<script>



    function updateListOfPastTrips(items) {
        $("#table_of_trips tbody tr").remove();
        $("#table_of_trips").html("");
        items = JSON.parse(items);

        items.forEach(function (index) {
            var ticketId = index.ticketId;
            var depTime = index.depTime;
            var arrivalTime = index.arrivalTime;
            var depStationName = index.depName;
            var arrivalStationName = index.arrivalName;
            var trainId = index.trainId;


            $("#tablePast").append("<tr><td class=\"column1\">"
                                   + ticketId + "</td><button type='button' onclick='bookFunction()'>book</button><br><td class=\"column2\">"
                                   + depTime + "</td><button type='button' onclick='bookFunction()'>book</button><br><td class=\"column3\">"
                                   + arrivalTime + "</td><button type='button' onclick='bookFunction()'>book</button><br><td class=\"column4\">"
                                   + depStationName + "</td><button type='button' onclick='bookFunction()'>book</button><br><td class=\"column5\">"
                                   + arrivalStationName + "</td><button type='button' onclick='bookFunction()'>book</button><br><td class=\"column5\">"
                                   + trainId + "</td><button type='button' onclick='bookFunction()'>book</button><br></tr><br>");
        });
    }

    function updateListOfFutureTrips(items) {
        $("#table_of_trips tbody tr").remove();
        $("#table_of_trips").html("");
        items = JSON.parse(items);

        items.forEach(function (index) {
            var ticketId = index.ticketId;
            var depTime = index.depTime;
            var arrivalTime = index.arrivalTime;
            var depStationName = index.depName;
            var arrivalStationName = index.arrivalName;
            var trainId = index.trainId;


            $("#tableFuture").append("<tr><td class=\"column1\">"
                                     + ticketId + "</td><button type='button' onclick='bookFunction()'>book</button><br><td class=\"column2\">"
                                     + depTime + "</td><button type='button' onclick='bookFunction()'>book</button><br><td class=\"column3\">"
                                     + arrivalTime + "</td><button type='button' onclick='bookFunction()'>book</button><br><td class=\"column4\">"
                                     + depStationName + "</td><button type='button' onclick='bookFunction()'>book</button><br><td class=\"column5\">"
                                     + arrivalStationName + "</td><button type='button' onclick='bookFunction()'>book</button><br><td class=\"column5\">"
                                     + trainId + "</td><button type='button' onclick='bookFunction()'>book</button><br></tr><br>");
        });
    }




    function getPastTrips(){
        $.get("api/ticket/allPastTickets", {
                  userId: 1}, //TODO: userId should be here

              function(r) {
                  updateListOfPastTrips(r);
              });
    }

    function getFutureTrips(){
        $.get("api/ticket/allFutureTickets", {
                  userId: 1}, //TODO: userId send from the login page

              function(r) {
                  updateListOfFutureTrips(r);
              });
    }

    $(document).ready(function (){
        getPastTrips();
        getFutureTrips();
    });
</script>
</body>
</html>