<!DOCTYPE html>
<html>
<head>
    <link rel="stylesheet" type="text/css" href="railway.css">
    <title>
        Ticket Information

    </title>
</head>
<body>
<section class="wrapper">
    <div class="main-content ticket-form" id="maincontent">
        <h3>Ticket Information </h3>
        <form action="" class= "bevertical">

            <div class="input-group">
                <label for="name">First name</label>
                <input type="text" placeholder="First name" id="name" autocomplete="off">
            </div>

            <div class="input-group">
                <label for="lastname">Last Name</label>
                <input type="text" placeholder="Last name" id="lastname" autocomplete="off">
            </div>

            <div class="input-group">
                <label for="idnumber"> ID number </label>
                <input type="text" placeholder="National ID number" id="idnumber">
            </div>

        </form>



        <!--                    <div class="input-group">-->
        <!--                        <label for="name"> Departure City </label>-->
        <!--                        <input type="text" placeholder="DepartureCity" id="from" autocomplete="off">-->
        <!--                    </div>-->

        <!--                    <div class="input-group">-->
        <!--                        <label for="name"> Arrival City </label>-->
        <!--                        <input type="text" placeholder="Arrival City " id="to" autocomplete="off">-->
        <!--                    </div>-->

    </div>
    <div class="input-group">
        <button class="button" onclick="confirm()"> Confirm </button> <br>
    </div>
</section>

<script>

    var queryString = decodeURIComponent(window.location.search);
    queryString = queryString.substring(1);
    var queries = queryString.split("&");


    function confirm(){
        var idnumber = $('#idnumber').val();
        var lastname = $('#lastname').val();
        var name = $('#name').val();
        var price = 6001;

        //TODO: check employee on server side and delete a line below
        var agentID = 1;
        var usrID = $('#email').val();
        var deptID = queries[2];
        var destID = queries[3];
        var depTime = queries[0];

        console.log(idnumber+" "+lastname+" "+name+" "+price+" "+deptID)


        $.post("api/ticket/insertTicket", {
                   ownerN: name,
                   ownerS: lastname,
                   price: 6001,
                   docId: idnumber,
                   usrId: usrID,
                   agentId: agentID,
                   deptId: deptID,

                   destId: destID,
                   date: depTime
               },

               function (r) {
                   console.log("Working?")
               });
    }
</script>
<script src="https://code.jquery.com/jquery-3.1.1.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
</body>
</html>